---
permalink: /docs/api/copy_artifacts/
title: "copy_artifacts()"
---

```python
copy_artifacts(...)
```

Direct subclasses: [archive_artifacts]({{ site.baseurl }}{% link _docs/api/archive_artifacts.md %})

Inherits all attributes from [ActionNode]({{ site.baseurl }}{% link _docs/api/action_node.md %}).

| Attribute | Type | Description |
|-----------|------|-------------|
| `data` or `resources` | [`resource_spec`]({{ site.baseurl }}{% link _docs/guides/resource_spec.md %}) | Files to copy into the executable bundle. |
| `spec` or `resource_map` | [`resource_map_spec`]({{ site.baseurl }}{% link _docs/guides/resource_map.md %}) | Allows changing the destination of the resources |

Use this target to copy artifacts generated by other nodes. Add the required targets as dependencies of this target and
copy_artifacts will automatically compute the required artifacts and copy them to the output folder.

> Note that the `phase` for copy_artifacts defaults to `build`. If you need to copy files during the `metabuild prepare` call, set `phase = 'prepare'` in the `copy_artifacts` call.

There are two types of sources for the `copy_artifacts` command:

1. Statically defined files or folders, added via the `data/resources` property. Use this model to copy files like licenses, documentation or extra resources to the artifacts folder.
2. Dynamically generated build artifacts like public header files, dynamic libraries, static libraries, executables, and debug symbols (only applies to `phase=build`).

The output folder is computed automatically based on the name of the `copy_artifacts` rule and the current configuration (platform, debug vs. release, x86 vs arm etc).

### Basic example:

```python
copy_artifacts(
    name = "copy_acplocal",
    data = [
        # This will copy the license.txt from the current folder into the artifacts folder.
        "license.txt"
    ],
    deps = [
        # All dependencies automatically copy their artifacts.
        # See the guide above for more details on what artifacts are copied.
        ":my_exe",
    ]
)

cxx_binary(
    name = "my_exe",
    srcs = [
        "file.cpp"
    ]
)
```

### Example, copying contents of archives

`copy_artifacts` can be used to extract multiple archives into a single folder. The `data` attribute allows the use of the `extract_files(archive, trim = 0)` method to specify the archive that needs to be extracted.

Example:

```python
http_file(
    name = "archive_macos",
    url = "https://archive_macos.zip",
    sha256 = "...",
    link_from_cache = True
)

http_file(
    name = "archive_win32",
    url = "https://archive_win32.zip",
    sha256 = "...",
    link_from_cache = True
)

http_file(
    name = "archive_headers",
    url = "https://archive_headers.zip",
    sha256 = "...",
    link_from_cache = True
)

copy_artifacts(
    name = "artifacts",

    # Note that `copy_artifacts` defaults to running during the build phase.
    # Use the `phase = prepare` to make the command run during the prepare phase.
    phase = "prepare",

    data = {
        "macos": (target.macos, extract_files("$(location :archive_macos)", trim = 1)),
        "win32": (target.win32, extract_files("$(location :archive_win32)", trim = 1)),
        "headers": extract_files("$(location :archive_headers)")
    })
```
