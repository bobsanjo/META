---
permalink: /docs/guides/cmake_flags/
title: "CMake Flags"
---

CMake has three kinds of properties.
1. Global level flags (usually starting with `CMAKE_`. E.g. `CMAKE_VERBOSE_MAKEFILE`). The only way to pass these to cmake via MetaBuild at the moment is to pass them to `metabuild build` after `--`. E.g. `metabuild build -- -DCMAKE_VERBOSE_MAKEFILE=1`. We would like to expose a way to mention these values in the spec or config files [METAB-]().
2. Target properties. Each CMake target can have properties set via [set_target_properties](https://cmake.org/cmake/help/v3.0/command/set_target_properties.html). The equivalent of this in MetaBuild are the `cmake_flags` and `exported_cmake_flags` fields of MetaBuild. If you use the `exported` version the dependees of your lib will also inherit the flags. A list of these properties is also available in the MetaBuild source code at [CMakeProperties.py](https://git.corp.adobe.com/meta-build/meta-build/blob/0.2.51/metabuild/generator/cmake/CMakeProperties.py#L26-L309). Note that MetaBuild has dedicated fields for some of these properties. You must use the MetaBuild property if one exists and not use the CMake flag. E.g., prefer `product_extension` and `compiler_flags` over `POSTFIX` and `COMPILER_FLAGS`, respectively. Violating this rule will cause MetaBuild to not be aware of these changes and not behave correctly. For example, when `POSTFIX` is used instead of `product_extension` MetaBuild's `copy_artifacts` can fail because it does not know that the extension of the product is changed.
    ```python
    cxx_binary(
        name = "my_exe",
        cmake_flags = {
           "COMPILE_FLAGS" : ["..."],
        },
    )
    ```
3. Source file properties. Each source code can have its own properties in CMake via [set_source_files_properties](https://cmake.org/cmake/help/latest/command/set_source_files_properties.html). You set these properties via the `taget.cmake_flags()` filter applied to `srcs=`, `linker_libraries=`, etc. A list of these properties is also available in the MetaBuild source code at [CMakeProperties.py](https://git.corp.adobe.com/meta-build/meta-build/blob/0.2.51/metabuild/generator/cmake/CMakeProperties.py#L311-L364).
     ```python
    cxx_binary(
        name = "my_exe",
        srcs = [
            # Here we tell CMake that this file is generated by another command. This way CMake will not error
            # out when it does not find the file at configure time.
            (target.cmake_flags({"GENERATED" : True}), "main.cpp"),
        ],
    )
    ```
